<!-- src/app/features/students/pages/student-list/student-list.html -->
<header class="page-header">
  <div class="title">
    <h1>Students</h1>
    <p>Manage your students</p>
  </div>

  <a class="btn btn-primary" routerLink="/students/new">
    <span class="icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </span>
    Add Student
  </a>
</header>

<div class="state error" *ngIf="error">
  <span class="icon" aria-hidden="true">
    <svg viewBox="0 0 24 24" fill="none">
      <path d="M12 9v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M12 17h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
      <path d="M10.3 4.6 2.6 18a2 2 0 0 0 1.7 3h15.4a2 2 0 0 0 1.7-3L13.7 4.6a2 2 0 0 0-3.4 0Z"
            stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </svg>
  </span>
  {{ error }}
</div>

<div class="state" *ngIf="loading">
  <span class="spinner" aria-hidden="true"></span>
  Loading…
</div>

<div class="card">
  <table class="table">
    <thead>
      <tr>
        <th>Full name</th>
        <th>Email</th>
        <th>Phone</th>
        <th class="th-actions">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let s of students">
        <td class="name">{{ s.fullName }}</td>

        <td>
          <a class="email" href="mailto:{{ s.email }}">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M4 7.5A2.5 2.5 0 0 1 6.5 5h11A2.5 2.5 0 0 1 20 7.5v9A2.5 2.5 0 0 1 17.5 19h-11A2.5 2.5 0 0 1 4 16.5v-9Z"
                      stroke="currentColor" stroke-width="2"/>
                <path d="m5.5 7 6.5 5 6.5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            {{ s.email }}
          </a>
        </td>

        <td>
          <span class="chip" *ngIf="s.phone; else noPhone">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M7.5 3h2.2c.7 0 1.3.5 1.4 1.2l.6 3c.1.6-.2 1.3-.8 1.6l-1.7.9a13.5 13.5 0 0 0 5.1 5.1l.9-1.7c.3-.6 1-.9 1.6-.8l3 .6c.7.1 1.2.7 1.2 1.4V17.5A3.5 3.5 0 0 1 17.5 21C9.5 21 3 14.5 3 6.5A3.5 3.5 0 0 1 6.5 3h1Z"
                      stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              </svg>
            </span>
            {{ s.phone }}
          </span>
          <ng-template #noPhone><span class="muted">—</span></ng-template>
        </td>

        <td class="actions">
          <a class="btn btn-ghost" routerLink="/students/{{ s.id }}/edit">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 20h9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1 1-4 11.5-11.5Z"
                      stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              </svg>
            </span>
            Edit
          </a>

          <button
            type="button"
            class="btn btn-danger"
            (click)="deleteStudent(s)"
            [disabled]="isDeleting(s.id)"
          >
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M4 7h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M10 11v6M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M6 7l1 14h10l1-14" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                <path d="M9 7V4h6v3" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              </svg>
            </span>
            {{ isDeleting(s.id) ? 'Deleting…' : 'Delete' }}
          </button>
        </td>
      </tr>

      <tr *ngIf="!loading && students.length === 0">
        <td colspan="4" class="empty">
          <div class="empty-box">
            <div class="empty-title">No students yet</div>
            <div class="empty-sub">Create your first student to get started.</div>
            <a class="btn btn-primary" routerLink="/students/new">
              <span class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </span>
              Add Student
            </a>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
